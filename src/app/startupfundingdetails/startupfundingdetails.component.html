<h3 class="bg-blue-600 text-white p-4 mb-4 rounded">Startup Funding Details</h3>

<mat-checkbox [(ngModel)]="isFundingDetailsEnabled" class="mb-4 text-lg font-medium">
  Funding Details
</mat-checkbox>

<div class="overflow-x-auto">
  <table mat-table [dataSource]="fundingRows" class="mat-elevation-z8 min-w-full bg-white border">

    <ng-container matColumnDef="sn">
      <th mat-header-cell *matHeaderCellDef class="bg-gray-200 font-medium text-center">SN</th>
      <td mat-cell *matCellDef="let element; let i = index" class="text-center">{{ i + 1 }}</td>
    </ng-container>

    <ng-container matColumnDef="schemeName">
      <th mat-header-cell *matHeaderCellDef class="bg-gray-200 font-medium">Scheme Name*</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <mat-form-field appearance="fill" class="w-full">
          <input matInput [(ngModel)]="fundingRows[i].schemeName" name="schemeName{{i}}" placeholder="Scheme Name" [disabled]="form_edit" required />
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="institutionName">
      <th mat-header-cell *matHeaderCellDef class="bg-gray-200 font-medium">Incubator/Institution Name*</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <mat-form-field appearance="fill" class="w-full">
          <input matInput [(ngModel)]="fundingRows[i].institutionName" name="institutionName{{i}}" placeholder="Institution Name" [disabled]="form_edit" required />
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="institutionType">
      <th mat-header-cell *matHeaderCellDef class="bg-gray-200 font-medium">Incubator /Institution Type*</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <mat-form-field appearance="fill" class="w-full">
          <mat-select [(ngModel)]="fundingRows[i].institutionType" name="institutionType{{i}}" placeholder="Select Incubator type" [disabled]="form_edit" required>
            <mat-option *ngFor="let type of incubatorTypes" [value]="type">{{ type }}</mat-option>
          </mat-select>
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="formatOfFunding">
      <th mat-header-cell *matHeaderCellDef class="bg-gray-200 font-medium">Format of Funding*</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <mat-form-field appearance="fill" class="w-full">
          <mat-select [(ngModel)]="fundingRows[i].formatOfFunding" name="formatOfFunding{{i}}" placeholder="Select" [disabled]="form_edit" required>
            <mat-option *ngFor="let format of fundingFormats" [value]="format">{{ format }}</mat-option>
          </mat-select>
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="sanctionAmount">
      <th mat-header-cell *matHeaderCellDef class="bg-gray-200 font-medium">Sanction Amount*</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <mat-form-field appearance="fill" class="w-full">
          <input matInput type="number" [(ngModel)]="fundingRows[i].sanctionAmount" name="sanctionAmount{{i}}" placeholder="Sanction Amount" [disabled]="form_edit" required />
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="disbursementAmount">
      <th mat-header-cell *matHeaderCellDef class="bg-gray-200 font-medium">Disbursement Amount*</th>
      <td mat-cell *matCellDef="let element; let i = index">
        <mat-form-field appearance="fill" class="w-full">
          <input matInput type="number" [(ngModel)]="fundingRows[i].disbursementAmount" name="disbursementAmount{{i}}" placeholder="Disbursement Amount" [disabled]="form_edit" required />
        </mat-form-field>
      </td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef class="bg-gray-200 font-medium text-center">Action</th>
      <td mat-cell *matCellDef="let element; let i = index" class="text-center">
        <button mat-button color="primary" (click)="editRow(i)">Edit</button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>

<div class="flex justify-end gap-4 mt-4">
  <button mat-raised-button color="primary" (click)="addRow()">Add New Row</button>
</div>

<div class="flex justify-end gap-4 mt-6">
  <button mat-raised-button color="primary" (click)="back()">Back</button>
  <button mat-raised-button color="primary" (click)="onSave()">Save & Next</button>
</div>
